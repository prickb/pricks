{"ast":null,"code":"import _slicedToArray from\"/Users/adhiraj/Desktop/PRICKLY NEW/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useState,useEffect}from\"react\";import\"./UpdateProfile.css\";import Loader from\"../layout/Loader/Loader\";import MailOutlineIcon from\"@material-ui/icons/MailOutline\";import FaceIcon from\"@material-ui/icons/Face\";import{useDispatch,useSelector}from\"react-redux\";import{clearErrors,updateProfile,loadUser}from\"../../actions/userAction\";import{useAlert}from\"react-alert\";import{UPDATE_PROFILE_RESET}from\"../../constants/userConstants\";import MetaData from\"../layout/MetaData\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateProfile=function UpdateProfile(_ref){var history=_ref.history;var dispatch=useDispatch();var alert=useAlert();var _useSelector=useSelector(function(state){return state.user;}),user=_useSelector.user;var _useSelector2=useSelector(function(state){return state.profile;}),error=_useSelector2.error,isUpdated=_useSelector2.isUpdated,loading=_useSelector2.loading;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),avatar=_useState6[0],setAvatar=_useState6[1];var _useState7=useState(\"/Profile.png\"),_useState8=_slicedToArray(_useState7,2),avatarPreview=_useState8[0],setAvatarPreview=_useState8[1];var updateProfileSubmit=function updateProfileSubmit(e){e.preventDefault();var myForm=new FormData();myForm.set(\"name\",name);myForm.set(\"email\",email);myForm.set(\"avatar\",avatar);dispatch(updateProfile(myForm));};var updateProfileDataChange=function updateProfileDataChange(e){var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){setAvatarPreview(reader.result);setAvatar(reader.result);}};reader.readAsDataURL(e.target.files[0]);};useEffect(function(){if(user){setName(user.name);setEmail(user.email);setAvatarPreview(user.avatar.url);}if(error){alert.error(error);dispatch(clearErrors());}if(isUpdated){alert.success(\"Profile Updated Successfully\");dispatch(loadUser());history.push(\"/account\");dispatch({type:UPDATE_PROFILE_RESET});}},[dispatch,error,alert,history,user,isUpdated]);return/*#__PURE__*/_jsx(Fragment,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"Update Profile\"}),/*#__PURE__*/_jsx(\"div\",{className:\"updateProfileContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"updateProfileBox\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"updateProfileHeading\",children:\"Update Profile\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"updateProfileForm\",encType:\"multipart/form-data\",onSubmit:updateProfileSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"updateProfileName\",children:[/*#__PURE__*/_jsx(FaceIcon,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",required:true,name:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"updateProfileEmail\",children:[/*#__PURE__*/_jsx(MailOutlineIcon,{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",required:true,name:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"updateProfileImage\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatarPreview,alt:\"Avatar Preview\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",accept:\"image/*\",onChange:updateProfileDataChange})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update\",className:\"updateProfileBtn\"})]})]})})]})});};export default UpdateProfile;","map":{"version":3,"names":["React","Fragment","useState","useEffect","Loader","MailOutlineIcon","FaceIcon","useDispatch","useSelector","clearErrors","updateProfile","loadUser","useAlert","UPDATE_PROFILE_RESET","MetaData","jsx","_jsx","jsxs","_jsxs","UpdateProfile","_ref","history","dispatch","alert","_useSelector","state","user","_useSelector2","profile","error","isUpdated","loading","_useState","_useState2","_slicedToArray","name","setName","_useState3","_useState4","email","setEmail","_useState5","_useState6","avatar","setAvatar","_useState7","_useState8","avatarPreview","setAvatarPreview","updateProfileSubmit","e","preventDefault","myForm","FormData","set","updateProfileDataChange","reader","FileReader","onload","readyState","result","readAsDataURL","target","files","url","success","push","type","children","title","className","encType","onSubmit","placeholder","required","value","onChange","id","src","alt","accept"],"sources":["/Users/adhiraj/Desktop/PRICKLY NEW/frontend/src/component/User/UpdateProfile.js"],"sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport \"./UpdateProfile.css\";\nimport Loader from \"../layout/Loader/Loader\";\nimport MailOutlineIcon from \"@material-ui/icons/MailOutline\";\nimport FaceIcon from \"@material-ui/icons/Face\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { clearErrors, updateProfile, loadUser } from \"../../actions/userAction\";\nimport { useAlert } from \"react-alert\";\nimport { UPDATE_PROFILE_RESET } from \"../../constants/userConstants\";\nimport MetaData from \"../layout/MetaData\";\n\nconst UpdateProfile = ({ history }) => {\n  const dispatch = useDispatch();\n  const alert = useAlert();\n\n  const { user } = useSelector((state) => state.user);\n  const { error, isUpdated, loading } = useSelector((state) => state.profile);\n\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [avatar, setAvatar] = useState();\n  const [avatarPreview, setAvatarPreview] = useState(\"/Profile.png\");\n\n  const updateProfileSubmit = (e) => {\n    e.preventDefault();\n\n    const myForm = new FormData();\n\n    myForm.set(\"name\", name);\n    myForm.set(\"email\", email);\n    myForm.set(\"avatar\", avatar);\n    dispatch(updateProfile(myForm));\n  };\n\n  const updateProfileDataChange = (e) => {\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      if (reader.readyState === 2) {\n        setAvatarPreview(reader.result);\n        setAvatar(reader.result);\n      }\n    };\n\n    reader.readAsDataURL(e.target.files[0]);\n  };\n\n  useEffect(() => {\n    if (user) {\n      setName(user.name);\n      setEmail(user.email);\n      setAvatarPreview(user.avatar.url);\n    }\n\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (isUpdated) {\n      alert.success(\"Profile Updated Successfully\");\n      dispatch(loadUser());\n\n      history.push(\"/account\");\n\n      dispatch({\n        type: UPDATE_PROFILE_RESET,\n      });\n    }\n  }, [dispatch, error, alert, history, user, isUpdated]);\n  return (\n    <Fragment>\n      {loading ? (\n        <Loader />\n      ) : (\n        <Fragment>\n          <MetaData title=\"Update Profile\" />\n          <div className=\"updateProfileContainer\">\n            <div className=\"updateProfileBox\">\n              <h2 className=\"updateProfileHeading\">Update Profile</h2>\n\n              <form\n                className=\"updateProfileForm\"\n                encType=\"multipart/form-data\"\n                onSubmit={updateProfileSubmit}\n              >\n                <div className=\"updateProfileName\">\n                  <FaceIcon />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Name\"\n                    required\n                    name=\"name\"\n                    value={name}\n                    onChange={(e) => setName(e.target.value)}\n                  />\n                </div>\n                <div className=\"updateProfileEmail\">\n                  <MailOutlineIcon />\n                  <input\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    required\n                    name=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                  />\n                </div>\n\n                <div id=\"updateProfileImage\">\n                  <img src={avatarPreview} alt=\"Avatar Preview\" />\n                  <input\n                    type=\"file\"\n                    name=\"avatar\"\n                    accept=\"image/*\"\n                    onChange={updateProfileDataChange}\n                  />\n                </div>\n                <input\n                  type=\"submit\"\n                  value=\"Update\"\n                  className=\"updateProfileBtn\"\n                />\n              </form>\n            </div>\n          </div>\n        </Fragment>\n      )}\n    </Fragment>\n  );\n};\n\nexport default UpdateProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
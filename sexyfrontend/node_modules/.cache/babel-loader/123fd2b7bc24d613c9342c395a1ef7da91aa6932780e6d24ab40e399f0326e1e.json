{"ast":null,"code":"import _slicedToArray from\"/Users/adhiraj/Desktop/prickly/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useEffect,useState}from\"react\";import{DataGrid}from\"@material-ui/data-grid\";import\"./productReviews.css\";import{useSelector,useDispatch}from\"react-redux\";import{clearErrors,getAllReviews,deleteReviews}from\"../../actions/productAction\";import{useAlert}from\"react-alert\";import{Button}from\"@material-ui/core\";import MetaData from\"../layout/MetaData\";import DeleteIcon from\"@material-ui/icons/Delete\";import Star from\"@material-ui/icons/Star\";import SideBar from\"./Sidebar\";import{DELETE_REVIEW_RESET}from\"../../constants/productConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductReviews=function ProductReviews(_ref){var history=_ref.history;var dispatch=useDispatch();var alert=useAlert();var _useSelector=useSelector(function(state){return state.review;}),deleteError=_useSelector.error,isDeleted=_useSelector.isDeleted;var _useSelector2=useSelector(function(state){return state.productReviews;}),error=_useSelector2.error,reviews=_useSelector2.reviews,loading=_useSelector2.loading;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),productId=_useState2[0],setProductId=_useState2[1];var deleteReviewHandler=function deleteReviewHandler(reviewId){dispatch(deleteReviews(reviewId,productId));};var productReviewsSubmitHandler=function productReviewsSubmitHandler(e){e.preventDefault();dispatch(getAllReviews(productId));};useEffect(function(){if(productId.length===24){dispatch(getAllReviews(productId));}if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(isDeleted){alert.success(\"Review Deleted Successfully\");history.push(\"/admin/reviews\");dispatch({type:DELETE_REVIEW_RESET});}},[dispatch,alert,error,deleteError,history,isDeleted,productId]);var columns=[{field:\"id\",headerName:\"Review ID\",minWidth:200,flex:0.5},{field:\"user\",headerName:\"User\",minWidth:200,flex:0.6},{field:\"comment\",headerName:\"Comment\",minWidth:350,flex:1},{field:\"rating\",headerName:\"Rating\",type:\"number\",minWidth:180,flex:0.4,cellClassName:function cellClassName(params){return params.getValue(params.id,\"rating\")>=3?\"greenColor\":\"redColor\";}},{field:\"actions\",flex:0.3,headerName:\"Actions\",minWidth:150,type:\"number\",sortable:false,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return deleteReviewHandler(params.getValue(params.id,\"id\"));},children:/*#__PURE__*/_jsx(DeleteIcon,{})})});}}];var rows=[];reviews&&reviews.forEach(function(item){rows.push({id:item._id,rating:item.rating,comment:item.comment,user:item.name});});return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"ALL REVIEWS - Admin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(SideBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"productReviewsContainer\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"productReviewsForm\",onSubmit:productReviewsSubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"productReviewsFormHeading\",children:\"ALL REVIEWS\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Star,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Product Id\",required:true,value:productId,onChange:function onChange(e){return setProductId(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{id:\"createProductBtn\",type:\"submit\",disabled:loading?true:false||productId===\"\"?true:false,children:\"Search\"})]}),reviews&&reviews.length>0?/*#__PURE__*/_jsx(DataGrid,{rows:rows,columns:columns,pageSize:10,disableSelectionOnClick:true,className:\"productListTable\",autoHeight:true}):/*#__PURE__*/_jsx(\"h1\",{className:\"productReviewsFormHeading\",children:\"No Reviews Found\"})]})]})]});};export default ProductReviews;","map":{"version":3,"names":["React","Fragment","useEffect","useState","DataGrid","useSelector","useDispatch","clearErrors","getAllReviews","deleteReviews","useAlert","Button","MetaData","DeleteIcon","Star","SideBar","DELETE_REVIEW_RESET","jsx","_jsx","jsxs","_jsxs","ProductReviews","_ref","history","dispatch","alert","_useSelector","state","review","deleteError","error","isDeleted","_useSelector2","productReviews","reviews","loading","_useState","_useState2","_slicedToArray","productId","setProductId","deleteReviewHandler","reviewId","productReviewsSubmitHandler","e","preventDefault","length","success","push","type","columns","field","headerName","minWidth","flex","cellClassName","params","getValue","id","sortable","renderCell","children","onClick","rows","forEach","item","_id","rating","comment","user","name","title","className","onSubmit","placeholder","required","value","onChange","target","disabled","pageSize","disableSelectionOnClick","autoHeight"],"sources":["/Users/adhiraj/Desktop/prickly/frontend/src/component/Admin/ProductReviews.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport { DataGrid } from \"@material-ui/data-grid\";\nimport \"./productReviews.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  clearErrors,\n  getAllReviews,\n  deleteReviews,\n} from \"../../actions/productAction\";\nimport { useAlert } from \"react-alert\";\nimport { Button } from \"@material-ui/core\";\nimport MetaData from \"../layout/MetaData\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Star from \"@material-ui/icons/Star\";\n\nimport SideBar from \"./Sidebar\";\nimport { DELETE_REVIEW_RESET } from \"../../constants/productConstants\";\n\nconst ProductReviews = ({ history }) => {\n  const dispatch = useDispatch();\n\n  const alert = useAlert();\n\n  const { error: deleteError, isDeleted } = useSelector(\n    (state) => state.review\n  );\n\n  const { error, reviews, loading } = useSelector(\n    (state) => state.productReviews\n  );\n\n  const [productId, setProductId] = useState(\"\");\n\n  const deleteReviewHandler = (reviewId) => {\n    dispatch(deleteReviews(reviewId, productId));\n  };\n\n  const productReviewsSubmitHandler = (e) => {\n    e.preventDefault();\n    dispatch(getAllReviews(productId));\n  };\n\n  useEffect(() => {\n    if (productId.length === 24) {\n      dispatch(getAllReviews(productId));\n    }\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (deleteError) {\n      alert.error(deleteError);\n      dispatch(clearErrors());\n    }\n\n    if (isDeleted) {\n      alert.success(\"Review Deleted Successfully\");\n      history.push(\"/admin/reviews\");\n      dispatch({ type: DELETE_REVIEW_RESET });\n    }\n  }, [dispatch, alert, error, deleteError, history, isDeleted, productId]);\n\n  const columns = [\n    { field: \"id\", headerName: \"Review ID\", minWidth: 200, flex: 0.5 },\n\n    {\n      field: \"user\",\n      headerName: \"User\",\n      minWidth: 200,\n      flex: 0.6,\n    },\n\n    {\n      field: \"comment\",\n      headerName: \"Comment\",\n      minWidth: 350,\n      flex: 1,\n    },\n\n    {\n      field: \"rating\",\n      headerName: \"Rating\",\n      type: \"number\",\n      minWidth: 180,\n      flex: 0.4,\n\n      cellClassName: (params) => {\n        return params.getValue(params.id, \"rating\") >= 3\n          ? \"greenColor\"\n          : \"redColor\";\n      },\n    },\n\n    {\n      field: \"actions\",\n      flex: 0.3,\n      headerName: \"Actions\",\n      minWidth: 150,\n      type: \"number\",\n      sortable: false,\n      renderCell: (params) => {\n        return (\n          <Fragment>\n            <Button\n              onClick={() =>\n                deleteReviewHandler(params.getValue(params.id, \"id\"))\n              }\n            >\n              <DeleteIcon />\n            </Button>\n          </Fragment>\n        );\n      },\n    },\n  ];\n\n  const rows = [];\n\n  reviews &&\n    reviews.forEach((item) => {\n      rows.push({\n        id: item._id,\n        rating: item.rating,\n        comment: item.comment,\n        user: item.name,\n      });\n    });\n\n  return (\n    <Fragment>\n      <MetaData title={`ALL REVIEWS - Admin`} />\n\n      <div className=\"dashboard\">\n        <SideBar />\n        <div className=\"productReviewsContainer\">\n          <form\n            className=\"productReviewsForm\"\n            onSubmit={productReviewsSubmitHandler}\n          >\n            <h1 className=\"productReviewsFormHeading\">ALL REVIEWS</h1>\n\n            <div>\n              <Star />\n              <input\n                type=\"text\"\n                placeholder=\"Product Id\"\n                required\n                value={productId}\n                onChange={(e) => setProductId(e.target.value)}\n              />\n            </div>\n\n            <Button\n              id=\"createProductBtn\"\n              type=\"submit\"\n              disabled={\n                loading ? true : false || productId === \"\" ? true : false\n              }\n            >\n              Search\n            </Button>\n          </form>\n\n          {reviews && reviews.length > 0 ? (\n            <DataGrid\n              rows={rows}\n              columns={columns}\n              pageSize={10}\n              disableSelectionOnClick\n              className=\"productListTable\"\n              autoHeight\n            />\n          ) : (\n            <h1 className=\"productReviewsFormHeading\">No Reviews Found</h1>\n          )}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default ProductReviews;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}